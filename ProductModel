using Domain;
using System;
using System.Collections.Generic;
using System.Text;

namespace Infraestructure
{
public class ProductModel 
  {
  private Producto[] productos;

  public void Add(Producto p)
    {
      if (p == null)
      {
        throw new ArgumentException("El campo proucto no puede estar vacio.");
      }

      if (productos == null)
      {
        productos = new Producto[1];
        productos [productos.Length -1] = p;
        return;
      }
      
     Producto[]tmp= new Producto[productos.Length +1];
     Array.Copy(productos, tmp, productos.Length);
     tmp[tmp.Length -1] = p;
     productos = tmp;
    }
    
    public bool UpdateProd(Producto p)
      {
        bool success = false;
        int index = GetIndex(p);
        
        if(index < 0)
          {
            throw new ArgumentException($"Error, el producto con el siguiente c칩digo: {p.Codigo} no est치 disponible o no existe."); 
          }
            
            productos[index]=p;
            return !success;
      }
      
      public bool DeleteProduct(Producto p)
        {
          bool flag= false;
          int index= GetIndex(p);
          
          if(index < 0)
            {
            throw new ArgumentException($"Error, el producto con el siguiente c칩digo: {p.Codigo} no existe o no est치 disponible.");
            }
            
            
            Producto[] tmp = new Producto[productos.Length - 1];
            productos[index] = productos[productos.Length - 1]; 
            Array.Copy(productos, tmp, productos.Length - 1);
            productos = tmp;
            
            return !flag;
        }
  }
}

